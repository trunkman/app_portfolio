{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/app/frontend/src/containers/Pages/MessageRoom.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useReducer } from \"react\"; // Style\n\nimport Box from \"@mui/material/Box\";\nimport { createStyles, makeStyles } from \"@material-ui/core/styles\";\nimport List from \"@mui/material/List\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport Typography from \"@mui/material/Typography\"; // Api\n\nimport { fetchMessages } from \"../../apis/rooms\"; // Reducer\n\nimport { messageInitialState, messageReducer } from '../../reducer/MessageReducer'; // Cpmponent\n\nimport { Chat } from \"../../components/Forms/Chat\";\nimport { Message } from \"../../components/Lists/Message\";\nimport { Loading } from '../../components/Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(() => createStyles({\n  'root': {\n    alignItems: 'center',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    maxWidth: 600,\n    textAlign: 'center',\n    width: '100%'\n  },\n  'title': {\n    backgroundColor: '#001e3c',\n    top: 90,\n    position: 'fixed',\n    width: 600\n  },\n  'messages': {\n    display: 'flex',\n    flexDirection: 'column-reverse',\n    flexGrow: 1,\n    width: '100%',\n    height: '100%',\n    overflow: \"auto\",\n    marginBottom: 150\n  }\n}));\nexport const MessageRoom = ({\n  roomId,\n  loginUser\n}) => {\n  _s();\n\n  const classes = useStyles();\n  const [messageState, messageDispatch] = useReducer(messageReducer, messageInitialState); // トークルームのメッセージ一覧を取得する\n\n  const Messages = () => {\n    fetchMessages(roomId).then(data => {\n      messageDispatch({\n        type: 'fetchSuccess',\n        payload: {\n          messages: data.messages,\n          user: data.user\n        }\n      });\n    });\n  };\n\n  useEffect(() => {\n    Messages();\n    const scrollArea = document.getElementById('scroll-area');\n\n    if (scrollArea) {\n      scrollArea.scrollBottom = scrollArea.scrollHeight;\n    }\n  }, [messageState.reRender]);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    className: classes.root,\n    id: \"scroll-area\",\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      className: classes.title,\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          letterSpacing: 10,\n          pb: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: messageState.user.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 48\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), messageState.fetchState !== 'ok' ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 43\n    }, this) : /*#__PURE__*/_jsxDEV(List, {\n      className: classes.messages,\n      children: messageState.messages.length === 0 ? /*#__PURE__*/_jsxDEV(ListItemText, {\n        children: \"\\u30E1\\u30C3\\u30BB\\u30FC\\u30B8\\u306F\\u3042\\u308A\\u307E\\u305B\\u3093\\u3002\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this) : messageState.messages.map((message, index) => /*#__PURE__*/_jsxDEV(Message, {\n        message: message,\n        loginUserId: loginUser.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 15\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Chat, {\n      user_id: loginUser.id,\n      room_id: roomId,\n      dataFetch: () => messageDispatch({\n        type: 'fetching'\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MessageRoom, \"rZr6H4yHzpBwoKfri/SkrOelCVM=\", false, function () {\n  return [useStyles];\n});\n\n_c = MessageRoom;\n\nvar _c;\n\n$RefreshReg$(_c, \"MessageRoom\");","map":{"version":3,"sources":["/home/ubuntu/app/frontend/src/containers/Pages/MessageRoom.jsx"],"names":["React","useEffect","useReducer","Box","createStyles","makeStyles","List","ListItemText","Typography","fetchMessages","messageInitialState","messageReducer","Chat","Message","Loading","useStyles","alignItems","display","flexDirection","justifyContent","maxWidth","textAlign","width","backgroundColor","top","position","flexGrow","height","overflow","marginBottom","MessageRoom","roomId","loginUser","classes","messageState","messageDispatch","Messages","then","data","type","payload","messages","user","scrollArea","document","getElementById","scrollBottom","scrollHeight","reRender","root","title","letterSpacing","pb","name","fetchState","length","map","message","index","id"],"mappings":"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","sourcesContent":["import React, { useEffect, useReducer } from \"react\";\n// Style\nimport Box from \"@mui/material/Box\";\nimport { createStyles, makeStyles } from \"@material-ui/core/styles\";\nimport List from \"@mui/material/List\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport Typography from \"@mui/material/Typography\";\n// Api\nimport { fetchMessages } from \"../../apis/rooms\"\n// Reducer\nimport { messageInitialState, messageReducer } from '../../reducer/MessageReducer';\n// Cpmponent\nimport { Chat } from \"../../components/Forms/Chat\";\nimport { Message } from \"../../components/Lists/Message\";\nimport { Loading } from '../../components/Loading';\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    'root': {\n      alignItems: 'center',\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n      maxWidth: 600,\n      textAlign: 'center',\n      width: '100%',\n    },\n    'title': {\n      backgroundColor: '#001e3c',\n      top: 90,\n      position: 'fixed',\n      width: 600,\n    },\n    'messages': {\n      display: 'flex',\n      flexDirection: 'column-reverse',\n      flexGrow: 1,\n      width: '100%',\n      height: '100%',\n      overflow: \"auto\",\n      marginBottom: 150,\n    }\n  }),\n);\n\nexport const MessageRoom = ({\n  roomId,\n  loginUser,\n}) => {\n  const classes = useStyles();\n  const [messageState, messageDispatch] = useReducer(messageReducer, messageInitialState)\n  // トークルームのメッセージ一覧を取得する\n  const Messages = () => {\n    fetchMessages(roomId)\n      .then(data => {\n        messageDispatch({\n          type: 'fetchSuccess',\n          payload: {\n            messages: data.messages,\n            user: data.user,\n          }\n        });\n      });\n  }\n\n  useEffect(() => {\n    Messages();\n    const scrollArea = document.getElementById('scroll-area');\n    if (scrollArea) {\n      scrollArea.scrollBottom = scrollArea.scrollHeight;\n    }\n  }, [messageState.reRender])\n\n  return (\n    <Box className={classes.root} id={\"scroll-area\"}>\n      <Typography variant=\"h4\" className={classes.title}>\n        <Box sx={{ letterSpacing: 10, pb: 2 }}><b>{messageState.user.name}</b></Box>\n      </Typography>\n\n      {messageState.fetchState !== 'ok' ? <Loading /> :\n        <List className={classes.messages}>\n          {messageState.messages.length === 0 ? (\n            <ListItemText>\n              メッセージはありません。\n            </ListItemText>\n          ) : (\n            messageState.messages.map((message, index) =>\n              <Message\n                message={message}\n                loginUserId={loginUser.id}\n              />\n            )\n          )}\n        </List>\n      }\n      <Chat\n        user_id={loginUser.id}\n        room_id={roomId}\n        dataFetch={() => messageDispatch({ type: 'fetching' })}\n      />\n    </Box>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}