{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/app/frontend/src/containers/Pages/Mybooks.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useReducer } from \"react\"; // Style\n\nimport Box from '@mui/material/Box';\nimport { createStyles, makeStyles } from \"@material-ui/core/styles\";\nimport Tab from '@mui/material/Tab';\nimport TabContext from '@mui/lab/TabContext';\nimport TabList from '@mui/lab/TabList';\nimport TabPanel from '@mui/lab/TabPanel';\nimport Typography from \"@mui/material/Typography\"; // Icon\n\nimport SearchIcon from '@mui/icons-material/Search'; // Api\n\nimport { fetchUserBooks } from '../../apis/users';\nimport { fetchSearchBooks } from '../../apis/books'; // Reducer\n\nimport { bookInitialState, bookReducer } from '../../reducer/BookReducer'; // Component\n\nimport { BookCard } from '../../components/Lists/BookCard';\nimport { BookList } from '../../components/Lists/BookList';\nimport { BookRecommend } from '../../components/Lists/BookRecommend';\nimport { BookSearchButton } from '../../components/Buttons/BookSearchButton';\nimport { Search } from '../../components/Forms/Search';\nimport { Loading } from '../../components/Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(() => createStyles({\n  'root': {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n    maxWidth: 1000,\n    mx: 'auto',\n    textAlign: 'center',\n    width: '100%'\n  },\n  'title': {\n    width: '100%'\n  },\n  'search': {\n    alignItems: 'flex-start',\n    display: 'flex',\n    flexDirection: 'column',\n    marginTop: 20,\n    width: 400\n  },\n  'recommend': {\n    display: 'flex',\n    justifyContent: 'space-between',\n    marginTop: 20,\n    width: 550\n  },\n  'list': {\n    background: '#334b63',\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    width: 1000\n  },\n  'card': {\n    background: '#334b63',\n    display: 'flex',\n    flexDirection: 'column',\n    width: 250,\n    height: 385,\n    padding: 15\n  }\n}));\nexport const Mybooks = ({\n  userId\n}) => {\n  _s();\n\n  const classes = useStyles();\n  const [keyword, setKeyword] = useState('');\n  const [tab, setTab] = useState('read');\n  const [bookState, bookDispatch] = useReducer(bookReducer, bookInitialState);\n  const tabLabelRead = `読了 : ${bookState.readBooks.length} 冊`;\n  const tabLabelStack = `積読 : ${bookState.stackBooks.length} 冊`; // ユーザーの登録本を取得する\n\n  const myBooks = () => {\n    fetchUserBooks(userId).then(data => {\n      bookDispatch({\n        type: 'fetchSuccess',\n        payload: {\n          readBooks: data.read_books,\n          stackBooks: data.stack_books\n        }\n      });\n    });\n  }; // 検索したキーワードに該当本を取得する\n\n\n  const searchBooks = () => {\n    bookDispatch({\n      type: 'posting'\n    });\n    fetchSearchBooks({\n      keyword: keyword\n    }).then(data => {\n      bookDispatch({\n        type: 'postSuccess',\n        payload: data.books\n      });\n    });\n  };\n\n  useEffect(() => {\n    myBooks();\n  }, [tab, bookState.reRender]);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h3\",\n      className: classes.title,\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          letterSpacing: 10,\n          pb: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: [\" ~ \", 'Testユーザー', \"\\u3055\\u3093\\u306E\\u7761\\u7720\\u672C\\u68DA ~\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 48\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      className: classes.search,\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        children: [/*#__PURE__*/_jsxDEV(SearchIcon, {\n          sx: {\n            fontSize: 20,\n            mr: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle\",\n          children: \"\\u7761\\u7720\\u672C\\u306E\\u691C\\u7D22\\u306F\\u3053\\u3061\\u3089\\u304B\\u3089\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Search, {\n        keyword: keyword,\n        handleChange: e => setKeyword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BookSearchButton, {\n        handleSubmit: searchBooks\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), bookState.searchBooks.length !== 0 && /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        children: [\"\\u691C\\u7D22\\u7D50\\u679C : \", bookState.searchBooks.length, \" \\u4EF6\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      className: classes.recommend,\n      children: /*#__PURE__*/_jsxDEV(BookRecommend, {\n        book: bookState.readBooks[0]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this), bookState.fetchState !== 'ok' ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 40\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [bookState.searchBooks.length !== 0 && /*#__PURE__*/_jsxDEV(Box, {\n        className: classes.list,\n        children: bookState.searchBooks.map(book => /*#__PURE__*/_jsxDEV(Box, {\n          className: classes.card,\n          children: /*#__PURE__*/_jsxDEV(BookCard, {\n            book: book.params\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 19\n          }, this)\n        }, book.params.isbn.toString(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }, this), bookState.searchBooks.length === 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(TabContext, {\n          value: tab,\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              borderBottom: 1,\n              borderColor: 'divider'\n            },\n            children: /*#__PURE__*/_jsxDEV(TabList, {\n              onChange: (event, newTab) => {\n                setTab(newTab);\n              },\n              variant: \"fullWidth\",\n              children: [/*#__PURE__*/_jsxDEV(Tab, {\n                label: tabLabelRead,\n                value: \"read\",\n                sx: {\n                  typography: 'h6',\n                  fontWeight: 'bold'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                label: tabLabelStack,\n                value: \"stack\",\n                sx: {\n                  typography: 'h6',\n                  fontWeight: 'bold'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n            value: \"read\",\n            children: bookState.readBooks.length === 0 ? /*#__PURE__*/_jsxDEV(Box, {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u8AAD\\u4E86\\u3057\\u305F\\u672C\\u306F\\u3042\\u308A\\u307E\\u305B\\u3093\\u3002\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u7761\\u7720\\u672C\\u3092\\u8AAD\\u3093\\u3067\\u5FEB\\u9069\\u306A\\u7761\\u7720\\u751F\\u6D3B\\u3092\\u30A8\\u30F3\\u30B8\\u30E7\\u30A4\\u3057\\u307E\\u3057\\u3087\\u3046\\u3002\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(Box, {\n              className: classes.list,\n              children: /*#__PURE__*/_jsxDEV(BookList, {\n                books: bookState.readBooks\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n            value: \"stack\",\n            children: bookState.stackBooks.length === 0 ? /*#__PURE__*/_jsxDEV(Box, {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u7A4D\\u3093\\u3067\\u3044\\u308B\\u672C\\u306F\\u3042\\u308A\\u307E\\u305B\\u3093\\u3002\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u3072\\u3068\\u307E\\u305A\\u8AAD\\u3093\\u3067\\u307F\\u305F\\u3044\\u7761\\u7720\\u672C\\u3092\\u30DD\\u30C1\\u308A\\u307E\\u3057\\u3087\\u3046\\u3002\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(Box, {\n              className: classes.list,\n              children: /*#__PURE__*/_jsxDEV(BookList, {\n                books: bookState.stackBooks\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 15\n        }, this)\n      }, void 0, false)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Mybooks, \"bERh2Uo067Yt3TcpY38omULuWJY=\", false, function () {\n  return [useStyles];\n});\n\n_c = Mybooks;\n\nvar _c;\n\n$RefreshReg$(_c, \"Mybooks\");","map":{"version":3,"sources":["/home/ubuntu/app/frontend/src/containers/Pages/Mybooks.jsx"],"names":["React","useState","useEffect","useReducer","Box","createStyles","makeStyles","Tab","TabContext","TabList","TabPanel","Typography","SearchIcon","fetchUserBooks","fetchSearchBooks","bookInitialState","bookReducer","BookCard","BookList","BookRecommend","BookSearchButton","Search","Loading","useStyles","display","flexWrap","justifyContent","maxWidth","mx","textAlign","width","alignItems","flexDirection","marginTop","background","height","padding","Mybooks","userId","classes","keyword","setKeyword","tab","setTab","bookState","bookDispatch","tabLabelRead","readBooks","length","tabLabelStack","stackBooks","myBooks","then","data","type","payload","read_books","stack_books","searchBooks","books","reRender","root","title","letterSpacing","pb","search","fontSize","mr","e","target","value","recommend","fetchState","list","map","book","card","params","isbn","toString","borderBottom","borderColor","event","newTab","typography","fontWeight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useReducer } from \"react\";\n// Style\nimport Box from '@mui/material/Box';\nimport { createStyles, makeStyles } from \"@material-ui/core/styles\";\nimport Tab from '@mui/material/Tab';\nimport TabContext from '@mui/lab/TabContext';\nimport TabList from '@mui/lab/TabList';\nimport TabPanel from '@mui/lab/TabPanel';\nimport Typography from \"@mui/material/Typography\";\n// Icon\nimport SearchIcon from '@mui/icons-material/Search';\n// Api\nimport { fetchUserBooks } from '../../apis/users';\nimport { fetchSearchBooks } from '../../apis/books';\n// Reducer\nimport { bookInitialState, bookReducer } from '../../reducer/BookReducer';\n// Component\nimport { BookCard } from '../../components/Lists/BookCard';\nimport { BookList } from '../../components/Lists/BookList';\nimport { BookRecommend } from '../../components/Lists/BookRecommend';\nimport { BookSearchButton } from '../../components/Buttons/BookSearchButton';\nimport { Search } from '../../components/Forms/Search';\nimport { Loading } from '../../components/Loading';\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    'root': {\n      display: 'flex',\n      flexWrap: 'wrap',\n      justifyContent: 'space-between',\n      maxWidth: 1000,\n      mx: 'auto',\n      textAlign: 'center',\n      width: '100%',\n    },\n    'title': {\n      width: '100%',\n    },\n    'search': {\n      alignItems: 'flex-start',\n      display: 'flex',\n      flexDirection: 'column',\n      marginTop: 20,\n      width: 400,\n    },\n    'recommend': {\n      display: 'flex',\n      justifyContent: 'space-between',\n      marginTop: 20,\n      width: 550,\n    },\n    'list': {\n      background: '#334b63',\n      display: 'flex',\n      flexWrap: 'wrap',\n      justifyContent: 'center',\n      width: 1000,\n    },\n    'card': {\n      background: '#334b63',\n      display: 'flex',\n      flexDirection: 'column',\n      width: 250,\n      height: 385,\n      padding: 15,\n    },\n  }),\n);\n\nexport const Mybooks = ({\n  userId,\n}) => {\n  const classes = useStyles();\n  const [keyword, setKeyword] = useState('');\n  const [tab, setTab] = useState('read');\n  const [bookState, bookDispatch] = useReducer(bookReducer, bookInitialState);\n  const tabLabelRead = `読了 : ${bookState.readBooks.length} 冊`\n  const tabLabelStack = `積読 : ${bookState.stackBooks.length} 冊`\n  // ユーザーの登録本を取得する\n  const myBooks = () => {\n    fetchUserBooks(userId)\n      .then(data => {\n        bookDispatch({\n          type: 'fetchSuccess',\n          payload: {\n            readBooks: data.read_books,\n            stackBooks: data.stack_books,\n          }\n        });\n      });\n  }\n  // 検索したキーワードに該当本を取得する\n  const searchBooks = () => {\n    bookDispatch({ type: 'posting', })\n    fetchSearchBooks({ keyword: keyword })\n      .then(data => {\n        bookDispatch({\n          type: 'postSuccess',\n          payload: data.books,\n        });\n      });\n  }\n\n  useEffect(() => {\n    myBooks();\n  }, [tab, bookState.reRender])\n\n  return (\n    <Box className={classes.root}>\n      <Typography variant=\"h3\" className={classes.title}>\n        <Box sx={{ letterSpacing: 10, pb: 2 }}><b> ~ {'Testユーザー'}さんの睡眠本棚 ~</b></Box>\n      </Typography>\n\n      <Box className={classes.search}>\n        <Box>\n          <SearchIcon sx={{ fontSize: 20, mr: 1 }} />\n          <Typography variant=\"subtitle\">\n            睡眠本の検索はこちらから\n          </Typography>\n        </Box>\n        <Search\n          keyword={keyword}\n          handleChange={e => setKeyword(e.target.value)}\n        />\n        <BookSearchButton\n          handleSubmit={searchBooks}\n        />\n        {bookState.searchBooks.length !== 0 &&\n          <Typography variant=\"h6\">\n            検索結果 : {bookState.searchBooks.length} 件\n          </Typography>\n        }\n      </Box>\n\n      <Box className={classes.recommend}>\n        <BookRecommend\n          book={bookState.readBooks[0]}\n        />\n      </Box>\n\n      {bookState.fetchState !== 'ok' ? <Loading /> :\n\n        <>\n          {bookState.searchBooks.length !== 0 &&\n            <Box className={classes.list}>\n              {bookState.searchBooks.map(book =>\n                <Box\n                  className={classes.card}\n                  key={book.params.isbn.toString()}\n                >\n                  <BookCard book={book.params} />\n                </Box>\n              )}\n            </Box>\n          }\n\n          {bookState.searchBooks.length === 0 &&\n            <>\n              <TabContext value={tab}>\n                <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n                  <TabList\n                    onChange={(event, newTab) => { setTab(newTab) }}\n                    variant=\"fullWidth\"\n                  >\n                    <Tab\n                      label={tabLabelRead}\n                      value=\"read\"\n                      sx={{ typography: 'h6', fontWeight: 'bold' }}\n                    />\n                    <Tab\n                      label={tabLabelStack}\n                      value=\"stack\"\n                      sx={{ typography: 'h6', fontWeight: 'bold' }}\n                    />\n                  </TabList>\n                </Box>\n                <TabPanel value=\"read\">\n                  {bookState.readBooks.length === 0 ? (\n                    <Box>\n                      <h2>読了した本はありません。</h2>\n                      <h2>睡眠本を読んで快適な睡眠生活をエンジョイしましょう。</h2>\n                    </Box>\n                  ) : (\n                    <Box className={classes.list}>\n                      <BookList books={bookState.readBooks} />\n                    </Box>\n\n                  )}\n                </TabPanel>\n                <TabPanel value=\"stack\">\n                  {bookState.stackBooks.length === 0 ? (\n                    <Box>\n                      <h2>積んでいる本はありません。</h2>\n                      <h2>ひとまず読んでみたい睡眠本をポチりましょう。</h2>\n                    </Box>\n                  ) : (\n                    <Box className={classes.list}>\n                      <BookList books={bookState.stackBooks} />\n                    </Box>\n                  )}\n                </TabPanel>\n              </TabContext>\n            </>\n          }\n        </>\n      }\n    </Box>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}